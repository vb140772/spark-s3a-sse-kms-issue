FROM python:3.11-slim

# Install boto3 (AWS S3 SDK for Python)
RUN pip install --no-cache-dir boto3==1.34.34

# Install CA certificates for SSL verification
RUN apt-get update && apt-get install -y ca-certificates && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /app

# Copy test script
COPY scripts/s3_crud_test.py /app/s3_crud_test.py

# Note: Sidekick CA certificate should be mounted at /certs/sidekick/ca.crt
# The script will use it for SSL verification if available

# Keep container running
CMD ["tail", "-f", "/dev/null"]

